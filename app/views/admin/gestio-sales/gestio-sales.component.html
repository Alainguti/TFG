<app-navbar></app-navbar>
<div class="container">
  <h1 class="text-center">Sales</h1>
  <div class="row" style="margin-top: 20px">
    <div class="col-lg-4 col-md-3" style="margin-bottom: 20px;border: 1px solid black" *ngFor="let sala of salas">
      <div>
        <h3 class="text-center">Sala {{sala.id}}</h3>
        <h5 style="margin: 0;font-weight: bold">Mentor:</h5>
        <ng-container *ngIf="sala.mentor === '';else mentor">
          <form [formGroup]="mentorForm" (ngSubmit)="assignaMentor(sala.id)" novalidate>
            <select class="form-select" formControlName="nom" autofocus>
              <option></option>
              <option *ngFor="let mentor of mentors_list">{{mentor.name}} {{mentor.second_name}} {{mentor.third_name}}</option>
            </select>
            <div style="margin-top: 5px; margin-bottom: 5px">
              <button type="submit" class="btn btn-primary" style="margin: 0 auto; display: block" [disabled]="!mentorForm.valid">Assigna</button>
            </div>
          </form>
        </ng-container>
        <ng-template #mentor>
          <div style="margin-bottom: 10px;margin-top: 3px">
            <p class="" style="margin: 0">{{mentors_dict.get(sala.mentor)}} <button style="float: right;display: block" class="btn btn-danger btn-sm" (click)="deleteMentorFromGroup(sala.id)">Expulsar</button></p>
          </div>
        </ng-template>
        <h5 style="font-weight: bold;margin: 0">Alumnes:</h5>
        <ng-container *ngFor="let i of users_list">
          <ng-container *ngIf="i.sala === sala.id">
            <div style="margin-bottom: 10px;margin-top: 10px">
              <p class="" style="margin: 0">{{i.name}} {{i.second_name}} {{i.third_name}} <button style="float: right" class="btn btn-danger btn-sm" (click)="deleteUserFromGroup(i.uid)">Expulsar</button></p>
            </div>
          </ng-container>
        </ng-container>
      </div>
    </div>
  </div>
</div>
<div class="container">
  <div class="row">
    <div class="col-5"></div>
    <button (click)="crearSala()" class="col-2">Crear sala</button>
    <div class="col-5"></div>
  </div>
</div>
